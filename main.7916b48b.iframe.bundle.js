(self.webpackChunk_js_widgets_registry_starterkit_react=self.webpackChunk_js_widgets_registry_starterkit_react||[]).push([[179],{"./.storybook/docs sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx%7Cmdx))$":function(module,__unused_webpack_exports,__webpack_require__){var map={"./1-Introduction.stories.mdx":"./.storybook/docs/1-Introduction.stories.mdx","./2-WidgetCatalog.stories.mdx":"./.storybook/docs/2-WidgetCatalog.stories.mdx","./3-contributing/1-GettingStarted.stories.mdx":"./.storybook/docs/3-contributing/1-GettingStarted.stories.mdx","./3-contributing/2-Usage.stories.mdx":"./.storybook/docs/3-contributing/2-Usage.stories.mdx","./3-contributing/3-Tips.stories.mdx":"./.storybook/docs/3-contributing/3-Tips.stories.mdx","./4-quality-assurance.stories.mdx":"./.storybook/docs/4-quality-assurance.stories.mdx","./5-configure-deployment.stories.mdx":"./.storybook/docs/5-configure-deployment.stories.mdx","./6-configure-tugboat.stories.mdx":"./.storybook/docs/6-configure-tugboat.stories.mdx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./.storybook/docs sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx%7Cmdx))$"},"./.storybook/docs/1-Introduction.stories.mdx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:function(){return __namedExportsOrder},__page:function(){return __page},default:function(){return _1_Introduction_stories}});__webpack_require__("./node_modules/react/index.js");var esm=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),dist_esm=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),banner_namespaceObject=__webpack_require__.p+"764067d8f022c9fdcfb1.jpg";function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const layoutProps={};function MDXContent({components:components,...props}){return(0,esm.kt)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),(0,esm.kt)(dist_esm.h_,{title:"Documentation/Introduction",mdxType:"Meta"}),(0,esm.kt)("h2",{id:"available-widgets"},"Available widgets"),(0,esm.kt)("ul",null,(0,esm.kt)("li",{parentName:"ul"},(0,esm.kt)("a",{parentName:"li",href:"/story/widgets-emoji-cards-widget--page"},"Emoji Cards"),": A widget to show a card for each emoji. This is a stock example widget you should delete from your registry.")),(0,esm.kt)("img",{src:banner_namespaceObject,alt:"Widget Registry"}),(0,esm.kt)("h2",{id:"what-are-widgets"},"What are widgets?"),(0,esm.kt)("p",null,"Widgets types are stand alone JavaScript applications ready to use in any\npublishing context. JavaScript developers create widgets in their own\nrepository, so they can be syndicated and embedded in publishing\nplatforms. These include popular CMS, static HTML, other JavaScript\napplications, etc. Build your digital strategy using widgets to maximize\nreuse of your development efforts. Widgets are designed to allow you to\nfocus on your strategy rather than on development."),(0,esm.kt)("h2",{id:"develop-widgets"},"Develop widgets"),(0,esm.kt)("p",null,"Widgets can be as simple as a personalized CTA, or as complex as a full\nembedded product catalog. Widgets are a powerful tool to build reactive\napplications that are rubber-stamped all across your digital properties."),(0,esm.kt)("h3",{id:"configurable"},"Configurable"),(0,esm.kt)("p",null,"Your widgets can accept external input. This can affect what the color\nscheme should be, what language should be used, what is the personalized\ntext for the call-to-action button, or what data source to use to fecth\nfor content. This allows you to maintain a single code base powering many\nvariants without code duplication."),(0,esm.kt)("h3",{id:"i18n"},"i18n"),(0,esm.kt)("p",null,"Widgets are ready for internationalization. Both interface text and\ncontent can be expressed in your users' languages."))}MDXContent.isMDXComponent=!0;const __page=()=>{throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};const componentMeta={title:"Documentation/Introduction",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={...componentMeta.parameters.docs||{},page:()=>(0,esm.kt)(dist_esm.aT,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,esm.kt)(MDXContent,null))};var _1_Introduction_stories=componentMeta;const __namedExportsOrder=["__page"]},"./.storybook/docs/2-WidgetCatalog.stories.mdx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:function(){return __namedExportsOrder},__page:function(){return __page},default:function(){return _2_WidgetCatalog_stories}});__webpack_require__("./node_modules/react/index.js");var esm=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),dist_esm=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),widget_workflow_namespaceObject=__webpack_require__.p+"b671358689c08e56455e.png";function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const layoutProps={};function MDXContent({components:components,...props}){return(0,esm.kt)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),(0,esm.kt)(dist_esm.h_,{title:"Documentation/Widget Catalog",mdxType:"Meta"}),(0,esm.kt)("h1",{id:"widget-catalog"},"Widget Catalog"),(0,esm.kt)("p",null,"The new registry compiler ",(0,esm.kt)("a",{parentName:"p",href:"https://www.github.com/js-widgets/webpack-cli",target:"_blank",rel:"nofollow noopener noreferrer"},(0,esm.kt)("inlineCode",{parentName:"a"},"@js-widgets/webpack-cli"))," operates under very\nfew assumptions on how your project is organized. With this we have the freedom to introduce a component library. We\nconsider Storybook to be the best tool for this task."),(0,esm.kt)("p",null,"The widget catalog becomes a product for both the stakeholder team and the development team. This aims to encourage\nearly feedback and progress tracking."),(0,esm.kt)("h2",{id:"the-catalog-for-stakeholders"},"The Catalog for Stakeholders"),(0,esm.kt)("p",null,"The widget catalog allows stakeholders to browse the available widgets and interact with them. Among other things, they\ncan click on the widget, change the language, provide alternative inputs, see the different states of a widget, etc."),(0,esm.kt)("p",null,"One of the challenges for widget developers is to keep the catalog organized to avoid confusion. This is specially\nimportant since this product is also meant for non-technical actors. For this reason each widget in the widget catalog\nshould contain a main story that for documentation purposes. This story is meant for stakeholders to validate, and\nevolve requirements on widgets. Each one of the ",(0,esm.kt)("strong",{parentName:"p"},"requirements")," of the widget should be ",(0,esm.kt)("strong",{parentName:"p"},"represented and exemplified with\nembedded interactive stories"),". These are contained in a ",(0,esm.kt)("inlineCode",{parentName:"p"},"widget.stories.mdx")," file at the root of each widget folder."),(0,esm.kt)("h2",{id:"a-widget-journey-to-the-cms"},"A Widget Journey to the CMS"),(0,esm.kt)("p",null,"The following diagram aims to explain the processes and tools required for a JS component in the catalog until it is\nshown to the end users in the CMS."),(0,esm.kt)("img",{src:widget_workflow_namespaceObject,alt:"Widget Workflow"}))}MDXContent.isMDXComponent=!0;const __page=()=>{throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};const componentMeta={title:"Documentation/Widget Catalog",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={...componentMeta.parameters.docs||{},page:()=>(0,esm.kt)(dist_esm.aT,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,esm.kt)(MDXContent,null))};var _2_WidgetCatalog_stories=componentMeta;const __namedExportsOrder=["__page"]},"./.storybook/docs/3-contributing/1-GettingStarted.stories.mdx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:function(){return __namedExportsOrder},__page:function(){return __page},default:function(){return _1_GettingStarted_stories}});__webpack_require__("./node_modules/react/index.js");var esm=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),dist_esm=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),my_widget_storybook_namespaceObject=__webpack_require__.p+"9d980ccb1bcdf18f8171.png";function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const layoutProps={};function MDXContent({components:components,...props}){return(0,esm.kt)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),(0,esm.kt)(dist_esm.h_,{title:"Documentation/Contributing/Getting Started",mdxType:"Meta"}),(0,esm.kt)("h1",{id:"getting-started"},"Getting Started"),(0,esm.kt)("p",null,"This tutorial will guide you through the creation of a new widget from scratch.\nHowever, it will not explain the concepts behind each one of the steps. See the\n",(0,esm.kt)("a",{parentName:"p",href:"/story/documentation-contributing-usage--page"},"Usage")," and\n",(0,esm.kt)("a",{parentName:"p",href:"/story/documentation-contributing-tips--page"},"Tips")," section for more details\nbehind the files created in this tutorial."),(0,esm.kt)("p",null,"This ",(0,esm.kt)("a",{href:"./docs/my-widget.zip"},"ZIP archive")," contains all the code in this\nguide at the time of this writing."),(0,esm.kt)("h2",{id:"1-create-the-widget"},"1. Create the Widget"),(0,esm.kt)("p",null,"Execute the following commands to create the necessary folders."),(0,esm.kt)("pre",null,(0,esm.kt)("code",{parentName:"pre",className:"language-console"},"mkdir --parents src/apps/my-widget/public src/apps/my-widget/locales src/apps/my-widget/components\ntouch src/apps/my-widget/public/.gitkeep\n")),(0,esm.kt)("h3",{id:"srcappsmy-widgetcomponentsmywidgettsx"},(0,esm.kt)("inlineCode",{parentName:"h3"},"src/apps/my-widget/components/MyWidget.tsx")),(0,esm.kt)("p",null,"This is the main component for the widget. Ideally we would break the component\nin smaller sub-components but we'll skip that for now in favor of brevity in the\nexample."),(0,esm.kt)("pre",null,(0,esm.kt)("code",{parentName:"pre",className:"language-typescript",metastring:"jsx",jsx:!0},"import React, { CSSProperties, ReactElement } from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nexport interface MyWidgetProps {\n  /**\n   * One of the predefined greetings.\n   *\n   * @default Hello\n   */\n  greeting: 'Hello' | 'Hi' | 'Howdy';\n  /**\n   * The name of the user to greet.\n   */\n  name: string;\n  /**\n   * Set to true to greet with excitement.\n   *\n   * @default false\n   */\n  excitement: boolean;\n}\n\nconst styles: Record<string, CSSProperties> = {\n  container: {\n    width: '15em',\n    backgroundColor: 'white',\n    borderRadius: '6px',\n    boxShadow: '1px 1px 5px rgba(0, 0, 0, 0.3)',\n    padding: '2em',\n  },\n  heading: {\n    fontSize: '1.4em',\n    fontWeight: 'bold',\n    textDecoration: 'underline',\n    marginBottom: '0.7em',\n  },\n};\n\nconst MyWidget = ({\n  greeting,\n  name,\n  excitement,\n}: MyWidgetProps): ReactElement => (\n  <div style={styles.container}>\n    <h5 style={styles.heading}>\n      <FormattedMessage defaultMessage=\"Greeting\" id=\"TvLEtg\" />\n    </h5>\n    <div>\n      {greeting}, <em>{name}</em>\n      {excitement ? '!' : '.'}\n    </div>\n  </div>\n);\n\nexport default MyWidget;\n")),(0,esm.kt)("h4",{id:"compile-i18n-messages"},"Compile i18n messages"),(0,esm.kt)("p",null,"At this point you will need to compile the messages. Since we are not sending\nthe messages for human translation we will see all messages in English\n(",(0,esm.kt)("em",null,"Greeting"),")."),(0,esm.kt)("p",null,"Go to the terminal and extract all the messages:"),(0,esm.kt)("pre",null,(0,esm.kt)("code",{parentName:"pre",className:"language-console"},"yarn extract\n")),(0,esm.kt)("p",null,"Note: If realpath command is failing and you're in mac-os, you can do it by installing ",(0,esm.kt)("inlineCode",{parentName:"p"},"coreutils")),(0,esm.kt)("pre",null,(0,esm.kt)("code",{parentName:"pre",className:"language-console"},"brew install coreutils\n")),(0,esm.kt)("p",null,"This will create a set of files (one per language) in ",(0,esm.kt)("inlineCode",{parentName:"p"},"src/apps/my-widget/locales/extractedStrings/*.json"),"."),(0,esm.kt)("p",null,"This would be when you collect these JSON files and send them over to the\ntranslators. To simulate the translation process edit the ",(0,esm.kt)("inlineCode",{parentName:"p"},"es.json")," and replace\n",(0,esm.kt)("inlineCode",{parentName:"p"},"Greeting")," by the word ",(0,esm.kt)("inlineCode",{parentName:"p"},"Saludo"),"."),(0,esm.kt)("p",null,"Then, back on the terminal, we'll compile the translated messages."),(0,esm.kt)("pre",null,(0,esm.kt)("code",{parentName:"pre",className:"language-console"},"yarn compile\n")),(0,esm.kt)("h3",{id:"srcappsmy-widgetlibstorywithtranslationtsx"},(0,esm.kt)("inlineCode",{parentName:"h3"},"src/apps/my-widget/lib/storyWithTranslation.tsx")),(0,esm.kt)("p",null,"In order to support translations inside of Storybook, and not just the compiled\nwidget, we need to add support for it."),(0,esm.kt)("pre",null,(0,esm.kt)("code",{parentName:"pre",className:"language-typescript",metastring:"jsx",jsx:!0},"import storyWithTranslationFromMessages, {\n  MessagesByCode,\n} from '../../../common/storybook/storyWithTranslationFromMessages';\nimport { Locale } from '../../../types/locale';\n\nimport messages_ar from '../locales/compiledStrings/ar.json';\nimport messages_de from '../locales/compiledStrings/de.json';\nimport messages_en from '../locales/compiledStrings/en.json';\nimport messages_es from '../locales/compiledStrings/es.json';\nimport messages_fr from '../locales/compiledStrings/fr.json';\nimport messages_it from '../locales/compiledStrings/it.json';\nimport messages_ja from '../locales/compiledStrings/ja.json';\nimport messages_ko from '../locales/compiledStrings/ko.json';\nimport messages_pl from '../locales/compiledStrings/pl.json';\nimport messages_pt from '../locales/compiledStrings/pt.json';\nimport messages_ru from '../locales/compiledStrings/ru.json';\nimport messages_tr from '../locales/compiledStrings/tr.json';\nimport messages_zh from '../locales/compiledStrings/zh.json';\n\nconst messagesByLangcode: MessagesByCode = {\n  [Locale.AR]: messages_ar,\n  [Locale.DE]: messages_de,\n  [Locale.EN]: messages_en,\n  [Locale.ES]: messages_es,\n  [Locale.FR]: messages_fr,\n  [Locale.IT]: messages_it,\n  [Locale.JA]: messages_ja,\n  [Locale.KO]: messages_ko,\n  [Locale.PL]: messages_pl,\n  [Locale.PT]: messages_pt,\n  [Locale.RU]: messages_ru,\n  [Locale.TR]: messages_tr,\n  [Locale.ZH]: messages_zh,\n};\n\nconst storyWithTranslation = (localeOverride: Locale | void) =>\n  storyWithTranslationFromMessages(localeOverride, messagesByLangcode);\n\nexport default storyWithTranslation;\n")),(0,esm.kt)("h3",{id:"srcappsmy-widgetcomponentsmywidgetstoriestsx"},(0,esm.kt)("inlineCode",{parentName:"h3"},"src/apps/my-widget/components/MyWidget.stories.tsx")),(0,esm.kt)("p",null,"This file contains the standalone stories. We declare stories here instead of in the ",(0,esm.kt)("inlineCode",{parentName:"p"},"widget.stories.mdx")," files because\nthis is compatible with snapshot testing via ",(0,esm.kt)("a",{parentName:"p",href:"https://storybook.js.org/addons/@storybook/addon-storyshots",target:"_blank",rel:"nofollow noopener noreferrer"},"Storyshots"),"."),(0,esm.kt)("pre",null,(0,esm.kt)("code",{parentName:"pre",className:"language-typescript",metastring:"jsx",jsx:!0},"import React from 'react';\nimport { Meta, StoryFn } from '@storybook/react';\nimport MyWidget, { MyWidgetProps } from './MyWidget';\nimport { Locale } from '../../../types/locale';\nimport storyWithTranslation from '../lib/storyWithTranslation';\n\nconst stories: Meta<MyWidgetProps> = {\n  title: 'Widgets/My Widget/Components/MyWidget',\n  component: MyWidget,\n  decorators: [storyWithTranslation()],\n};\n\nconst Template: StoryFn<MyWidgetProps> = (args) => <MyWidget {...args} />;\n\nexport const Default = Template.bind({});\nDefault.args = {\n  greeting: 'Hello',\n  name: 'Alice',\n  excitement: false,\n};\n\nexport const Hi = Template.bind({});\nHi.args = {\n  greeting: 'Hi',\n  name: 'Alice',\n  excitement: false,\n};\n\nexport const Howdy = Template.bind({});\nHowdy.args = {\n  greeting: 'Howdy',\n  name: 'Alice',\n  excitement: false,\n};\n\nexport const WithExcitement = Template.bind({});\nWithExcitement.args = {\n  greeting: 'Howdy',\n  name: 'Alice',\n  excitement: true,\n};\n\nexport const WithExcitementHi = Template.bind({});\nWithExcitementHi.args = {\n  greeting: 'Hi',\n  name: 'Bob',\n  excitement: true,\n};\n\nexport const WithExcitementEmoji = Template.bind({});\nWithExcitementEmoji.args = {\n  greeting: 'Hi',\n  name: '🎉',\n  excitement: true,\n};\n\nexport const Spanish = Template.bind({});\nSpanish.args = { greeting: 'Hi', name: 'Alícia', excitement: false };\nSpanish.decorators = [storyWithTranslation(Locale.ES)];\n\nexport default stories;\n")),(0,esm.kt)("h3",{id:"srcappsmy-widgetwidgetstoriesmdx"},(0,esm.kt)("inlineCode",{parentName:"h3"},"src/apps/my-widget/widget.stories.mdx")),(0,esm.kt)("p",null,"This file contains the main component documentation. Consider this as an evolution of a README.md for the component. It\nallows for common MarkDown documenting, but it lets you embed stories along with the docs."),(0,esm.kt)("pre",null,(0,esm.kt)("code",{parentName:"pre",className:"language-md"},'import { ArgsTable, Canvas, Meta, Story } from \'@storybook/addon-docs\';\nimport MyWidget from \'./components/MyWidget\';\nimport { Locale } from \'../../types/locale\';\nimport storyWithTranslation from \'./lib/storyWithTranslation\';\n\n<Meta\n  title="Widgets/My Widget/Widget"\n  component={MyWidget}\n  decorators={[storyWithTranslation(Locale.EN)]}\n/>\n\nexport const Template = (args) => <MyWidget {...args} />;\n\n# My Widget\n\n## Requirements\n\nThe stakeholders wanted to make sure we had a way to greet our users. According\nto their research the best way to make a user feel welcome is by using one of\nthese three greetings.\n\n<Story id="widgets-my-widget-components-mywidget--default" />\n\n<Story id="widgets-my-widget-components-mywidget--hi" />\n\n<Story id="widgets-my-widget-components-mywidget--howdy" />\n\nAnother requirement was that some users may need to be greeted with additional\nexcitement. This is signaled by adding an exclamation at the end of the\ngreeting.\n\n<Story id="widgets-my-widget-components-mywidget--with-excitement" />\n\n<Story id="widgets-my-widget-components-mywidget--with-excitement-hi" />\n\n<Story id="widgets-my-widget-components-mywidget--with-excitement-emoji" />\n\n## i18n\n\nThe interface strings can be translated, as proven by:\n\n<Story id="widgets-my-widget-components-mywidget--spanish" />\n\n## Props\n\n<ArgsTable of={MyWidget} />\n')),(0,esm.kt)("h3",{id:"srcappsmy-widgetindextsx"},(0,esm.kt)("inlineCode",{parentName:"h3"},"src/apps/my-widget/index.tsx")),(0,esm.kt)("p",null,"This file does not have any impact in Storybook. This is the code that will let\nthe CMS embed the widget in the page. This is mostly boilerplate, and its main\npurpose is to collect the editorial input left in the DOM and pass it as React\nprops."),(0,esm.kt)("pre",null,(0,esm.kt)("code",{parentName:"pre",className:"language-typescript",metastring:"jsx",jsx:!0},"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'regenerator-runtime/runtime';\nimport { IntlProvider } from 'react-intl';\nimport normalizeWidgetInput from '../../common/normalizeWidgetInput';\nimport MyWidget from './components/MyWidget';\nimport widgetDefinition from './MyWidget.widget';\n\nimport { RenderFn } from '../../types/widgets';\n\nconst render: RenderFn = async function (instanceId, langCode, origin, cb) {\n  const { element, locale, messages } = await normalizeWidgetInput(\n    instanceId,\n    langCode,\n    widgetDefinition,\n  );\n  if (!element || !locale) {\n    return;\n  }\n  let greeting = element.getAttribute('data-greeting');\n  switch (greeting) {\n    case 'Hello':\n    case 'Hi':\n    case 'Howdy':\n      break;\n    default:\n      greeting = null;\n  }\n  const userName = element.getAttribute('data-name');\n  const excitement = element.getAttribute('data-excitement');\n  ReactDOM.render(\n    <IntlProvider locale={locale} messages={messages}>\n      <MyWidget\n        greeting={greeting || 'Hello'}\n        name={userName || ''}\n        excitement={Boolean(excitement)}\n      />\n    </IntlProvider>,\n    element,\n    () => cb(element),\n  );\n};\n\nexport default render;\n")),(0,esm.kt)("h3",{id:"srcappsmy-widgetmywidgetwidgetjs"},(0,esm.kt)("inlineCode",{parentName:"h3"},"src/apps/my-widget/MyWidget.widget.js")),(0,esm.kt)("p",null,"This is the widget definition file. See ",(0,esm.kt)("a",{parentName:"p",href:"/story/documentation-contributing-usage--page"},"Usage")," documentation for more info about\nit."),(0,esm.kt)("pre",null,(0,esm.kt)("code",{parentName:"pre",className:"language-javascript"},"module.exports = {\n  entry: './src/apps/my-widget/index.tsx',\n  shortcode: 'my-widget',\n  title: 'My Widget',\n  status: 'stable',\n  description: 'This is an example widget for the tutorial.',\n  useExternalPeerDependencies: ['react', 'react-dom', 'react-intl'],\n  additionalCustomProperties: {\n    availableTranslations: [\n      'ar',\n      'de',\n      'en',\n      'es',\n      'fr',\n      'it',\n      'ja',\n      'ko',\n      'pl',\n      'pt',\n      'ru',\n      'tr',\n      'zh',\n    ],\n  },\n};\n")),(0,esm.kt)("h2",{id:"2-the-result"},"2. The Result"),(0,esm.kt)("p",null,"Once the widget code is in place, running Storybook will give you a running\npreview of the widget and its documentation."),(0,esm.kt)("h3",{id:"the-storybook-stories"},"The Storybook Stories"),(0,esm.kt)("img",{src:my_widget_storybook_namespaceObject,alt:"My widget stories"}),(0,esm.kt)("p",null,"The main thing to notice is that you can see how your component ",(0,esm.kt)("inlineCode",{parentName:"p"},"MyWidget"),"\nrenders with different sets of props ",(0,esm.kt)("span",{style:{fontWeight:"bolder",color:"white",padding:"5px 10px",backgroundColor:"#241f31",borderRadius:"25px"}},"1"),". This will render the React component and even apply translations to the interface text ",(0,esm.kt)("span",{style:{fontWeight:"bolder",color:"white",padding:"5px 10px",backgroundColor:"#241f31",borderRadius:"25px"}},"2"),(0,esm.kt)("small",null,"*"),"."),(0,esm.kt)("small",{style:{fontSize:"0.8em"}},"* Note that content is not translated in this example for simplicity."),(0,esm.kt)("p",null,"Another notable thing is that Storybook will parse your ",(0,esm.kt)("inlineCode",{parentName:"p"},"MyWidgetProps")," type to\ngenerate the knobs ",(0,esm.kt)("span",{style:{fontWeight:"bolder",color:"white",padding:"5px 10px",backgroundColor:"#241f31",borderRadius:"25px"}},"3"),'. These allow you to change the props passed to the\ncomponent in the canvas in real time. Tweak the knobs to find edge cases\nrendering the component. Once you are satisfied go back and write a story with\nthose values as a "bookmark" of prop values.'),(0,esm.kt)("p",null,"Before sending your changes, you need to update the snapshot tests with your widget. You can update them by running:"),(0,esm.kt)("pre",null,(0,esm.kt)("code",{parentName:"pre",className:"language-console"},"TZ=UTC yarn test --watchAll=false --updateSnapshot\n")),(0,esm.kt)("p",null,"After you do this, you need to ensure the changes in the snapshots file make sense and only touch your widget."),(0,esm.kt)("h3",{id:"the-compiled-widget"},"The Compiled Widget"),(0,esm.kt)("p",null,"The other result of the widget is the set of JS, CSS, translations, and static assets that will be uploaded by Travis CI to Cloud Object Storage to be used by the CMS. In addition to this the widget registry file will be updated with the necessary information for the widget."),(0,esm.kt)("p",null,"If you want to know more check out ",(0,esm.kt)("a",{parentName:"p",href:"https://js-widgets.github.io/webpack-cli/docs/build-registry",target:"_blank",rel:"nofollow noopener noreferrer"},"the documentation page for ",(0,esm.kt)("inlineCode",{parentName:"a"},"@js-widgets/webpack-cli")),", and ",(0,esm.kt)("a",{parentName:"p",href:"/story/documentation-widget-catalog--page"},"this diagram")," showing the compiled widget life cycle."),(0,esm.kt)("p",null,"In ",(0,esm.kt)("inlineCode",{parentName:"p"},"MSC-Cloud/hc-widgets")," we execute the following command to compile widgets in ",(0,esm.kt)("a",{parentName:"p",href:"https://github.ibm.com/MSC-Cloud/hc-widgets/blob/development/.travis.yml#L35=",target:"_blank",rel:"nofollow noopener noreferrer"},(0,esm.kt)("inlineCode",{parentName:"a"},".travis.yml")),":"),(0,esm.kt)("pre",null,(0,esm.kt)("code",{parentName:"pre",className:"language-console"},'NODE_ENV=production npx @js-widgets/webpack-cli --existing-registry="${PUBLIC_URL}/registry.json" --output-dir="${TRAVIS_BUILD_DIR}/widget-registry" "${TRAVIS_BUILD_DIR}"\n')),(0,esm.kt)("p",null,"The results of the compilation (the JS and CSS that the CMS will put in the page) is uploaded to Cloud Object Storage using ",(0,esm.kt)("a",{parentName:"p",href:"https://github.ibm.com/MSC-Cloud/hc-widgets/blob/development/scripts/ci/upload-to-cos.sh",target:"_blank",rel:"nofollow noopener noreferrer"},"this script"),". Keep in mind that, in the future, we may upload to a different location."))}MDXContent.isMDXComponent=!0;const __page=()=>{throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};const componentMeta={title:"Documentation/Contributing/Getting Started",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={...componentMeta.parameters.docs||{},page:()=>(0,esm.kt)(dist_esm.aT,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,esm.kt)(MDXContent,null))};var _1_GettingStarted_stories=componentMeta;const __namedExportsOrder=["__page"]},"./.storybook/docs/3-contributing/2-Usage.stories.mdx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:function(){return __namedExportsOrder},__page:function(){return __page}});__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const linkButtonStyle={display:"inline-block",padding:"10px 25px",background:"#0062ff",color:"white",textDecoration:"none"},linkButtonStyleSecondary={...linkButtonStyle,background:"#f4f4f4",color:"black"},layoutProps={};function MDXContent({components:components,...props}){return(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__.h_,{title:"Documentation/Contributing/Usage",mdxType:"Meta"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h1",{id:"usage-for-developers"},"Usage for Developers"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"Storybook encourages developing components in isolation, but how does on get from the component to the widget?"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("img",{src:"wr-flow.png",alt:"Work Flow",title:"Work Flow"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h2",{id:"1-entry-point"},"1. Entry Point"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"The ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},".widgetRegistry/main.js")," is the entry point for the widget compiler. It's ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"register")," configuration instructs the\nCLI to search for files ending in ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},".widget.js"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"This file is configured once. It is unlikely that ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"register")," needs to be updated."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h2",{id:"2-widget-definition-files"},"2. Widget Definition Files"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"Each widget will need a widget definition file, aka ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"my-thing.widget.js"),". It contains the necessary metadata for the\nwidget, including the input parameters the content producers will need to populate when embedding the widget."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"From a workflow perspective, the most relevant entry is ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"entry"),". This points to the widget's render file, which exports a function that renders the widget (a React app in the example)."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"See ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("a",{parentName:"p",href:"https://github.com/js-widgets/registry-starterkit-react/blob/main/src/apps/emoji-cards/EmojiCards.widget.js",target:"_blank",rel:"nofollow noopener noreferrer"},"the widget definition file for the Emoji Cards widget")," below."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("code",{parentName:"pre",className:"language-javascript"},"module.exports = {\n  entry: './src/apps/emoji-cards/index.tsx',\n  shortcode: 'emoji-cards',\n  title: 'Emoji Cards',\n  status: 'stable',\n  description: 'Incredible emoji trading cards',\n  useExternalPeerDependencies: ['react', 'react-dom', 'react-intl'],\n  settingsSchema: {\n    type: 'object',\n    properties: {\n      fields: {\n        type: 'object',\n        properties: {\n          emoji: {\n            type: 'string',\n            title: 'Emoji code',\n            description: 'The name of the emoji to display.',\n            examples: ['the_horns', 'pinching_hand'],\n          },\n        },\n      },\n    },\n  },\n  additionalCustomProperties: {\n    availableTranslations: [\n      'ar',\n      'de',\n      'en',\n      'es',\n      'es',\n      'fr',\n      'it',\n      'ja',\n      'ko',\n      'pl',\n      'pt',\n      'ru',\n      'tr',\n      'zh',\n    ],\n  },\n};\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"See the documentation for the widget definition file in the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"@js-widgets/webpack-cli")," documentation site. Reading this\nis ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("strong",{parentName:"p"},"highly recommended"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("a",{style:linkButtonStyle,href:"https://js-widgets.github.io/webpack-cli/docs/registry/widget-definition",target:"_blank"},"Read the docs"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("a",{parentName:"p",href:"https://js-widgets.github.io/webpack-cli",target:"_blank",rel:"nofollow noopener noreferrer"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("img",{parentName:"a",src:"https://camo.githubusercontent.com/3693a0ff1fefe7ac31adf36125d2ad1e6be65e1eb0133841a9f0d63f7aa8c30f/68747470733a2f2f6a732d776964676574732e6769746875622e696f2f7765627061636b2d636c692f696d672f646f63756d656e746174696f6e2d736974652e706e67",alt:"Webpack CLI"}))),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h2",{id:"3-render-files"},"3. Render Files"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"Widgets are stand alone JS applications, but a component library only has components. To bridge that gap we need to\ncreate a render file. This is a file that will render a component in a ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"<div>")," that the CMS will print on the page. The\nJavaScript application will render inside that ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"<div>"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"Widgets will likely have to support translations and state management. Translations are handled by ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"react-intl"),", and state management by ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"react-redux"),".\nSee the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("a",{parentName:"p",href:"https://github.com/js-widgets/registry-starterkit-react/blob/main/src/apps/emoji-cards/index.tsx",target:"_blank",rel:"nofollow noopener noreferrer"},"source code of the render file for the Emoji Cards widget"),"\nfor an example on how to write your own."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("a",{style:linkButtonStyleSecondary,href:"https://formatjs.io/docs/getting-started/installation/",target:"_blank"},"React Intl docs")," ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("a",{style:linkButtonStyleSecondary,href:"https://redux-toolkit.js.org/",target:"_blank"},"Redux Toolkit Docs"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"See the render file for the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("em",{parentName:"p"},"My Widget")," widget from the previous tutorial below."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("code",{parentName:"pre",className:"language-javascript"},"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'regenerator-runtime/runtime';\nimport { IntlProvider } from 'react-intl';\nimport normalizeWidgetInput from '../../common/normalizeWidgetInput';\nimport MyWidget from './components/MyWidget';\nimport widgetDefinition from './MyWidget.widget';\n\nimport { RenderFn } from '../../types/widgets';\n\nconst render: RenderFn = async function (instanceId, langCode, origin, cb) {\n  const { element, locale, messages } = await normalizeWidgetInput(\n    instanceId,\n    langCode,\n    widgetDefinition,\n  );\n  if (!element || !locale) {\n    return;\n  }\n  let greeting = element.getAttribute('data-greeting');\n  switch (greeting) {\n    case 'Hello':\n    case 'Hi':\n    case 'Howdy':\n      break;\n    default:\n      greeting = null;\n  }\n  const userName = element.getAttribute('data-name');\n  const excitement = element.getAttribute('data-excitement');\n  ReactDOM.render(\n    <IntlProvider locale={locale} messages={messages}>\n      <MyWidget\n        greeting={greeting || 'Hello'}\n        name={userName || ''}\n        excitement={Boolean(excitement)}\n      />\n    </IntlProvider>,\n    element,\n    () => cb(element),\n  );\n};\n\nexport default render;\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"The ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"@js-widgets/webpack-cli")," documentation contains more information on render files. Check it out for more insight."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("a",{style:linkButtonStyle,href:"https://js-widgets.github.io/webpack-cli/docs/registry/render-file",target:"_blank"},"Read the docs"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h2",{id:"in-practice"},"In practice"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"Use the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("em",{parentName:"p"},"Emoji Cards")," widget as a reference implementation for your widgets. Noteworthy features:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("ol",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ol"},"Structured in small components."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ol"},"Storybook integration."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ol"},"Low effort unit testing from the Storybook stories using jest."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ol"},"Examples for widget configuration and render files."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ol"},"Accessibility reports integrated in Storybook."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ol"},"Visual regression testing using Tugboat."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ol"},"Automated release management upon commit onto ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"li"},"main"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ol"},"Internationalization (i18n).")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h3",{id:"start-a-new-widget"},"Start a new widget"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"Create a new sub-directory in ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"/src/apps")," with the name of the widget in ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Letter_case#Kebab_case",target:"_blank",rel:"nofollow noopener noreferrer"},"kebab-case"),".\nFor instance ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"/src/apps/journey-to-mallorca"),". Use the same name you will use for the widget's ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("a",{parentName:"p",href:"https://js-widgets.github.io/js-widgets/registry-schema/#items_shortcode",target:"_blank",rel:"nofollow noopener noreferrer"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"a"},"shortcode")),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("ol",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ol"},"The root-level component, the widget. Example: ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"li"},"/src/apps/journey-to-mallorca/index.tsx"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ol"},"A folder with the name ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"li"},"components"),". This will contain all the lower level components that will be ultimately used in ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"li"},"index.tsx"),". Example: ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"li"},"/src/apps/journey-to-mallorca/components/Button.tsx"),".")))}MDXContent.isMDXComponent=!0;const __page=()=>{throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};const componentMeta={title:"Documentation/Contributing/Usage",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={...componentMeta.parameters.docs||{},page:()=>(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__.aT,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)(MDXContent,null))},__webpack_exports__.default=componentMeta;const __namedExportsOrder=["__page"]},"./.storybook/docs/3-contributing/3-Tips.stories.mdx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:function(){return __namedExportsOrder},__page:function(){return __page}});__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const layoutProps={};function MDXContent({components:components,...props}){return(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__.h_,{title:"Documentation/Contributing/Tips",mdxType:"Meta"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h1",{id:"development-tips"},"Development Tips"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"This page contains development tips and conventions in this project."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h2",{id:"1-translations"},"1. Translations"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"This project uses react-intl to translate the interface strings. To make your widget multilingual:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("ul",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ul"},"When rendering text on English, wrap it with a ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"li"},"<FormattedMessage>"),". Running\n",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"li"},"yarn lint:fix")," will generate a unique ID for you. This ID is an alphanumeric code that changes when the default message\nchanges to ensure translations are up-to-date. For instance:")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("code",{parentName:"pre",className:"language-jsx"},'import { FormattedMessage } from \'react-intl\';\n// ...\n<FormattedMessage\n  defaultMessage="There was a problem loading your itinerary. Please try again later."\n  id="problems"\n/>;\n')),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("ul",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ul"},"Once you have your app ready for translation, execute the script\n",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"li"},"yarn extract"),". This will scan for the messages in all the widgets and put\nthem in each of the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"li"},"./src/apps/my-widget-id/locales/extractedStrings")," folder.\nYou can use the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"li"},"en.json")," file to submit the string for translation. Once you\nget the translated JSON files (",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"li"},"es.json"),", ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"li"},"ja.json"),", ...) add them to the\n",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"li"},"extractedStrings")," folder."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ul"},'Before publishing your widget remember to "compile" the translations using\n',(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"li"},"yarn compile"),".")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"After following those steps the CI deployment will upload the translations to\nGitHub Pages under: https://your-GH-pages-url/translations/your-widget."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("strong",{parentName:"p"},"TIP:")," if you want to check your translations locally (while running the app\nwith ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"yarn start"),") compile them, then copy the JSON files into\n",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"<root>/public/translations/<widget-id>/"),". This is not needed if you are only\nlooking at Storybook."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h2",{id:"2-using-media"},"2. Using media"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"You can use images and other media assets normally within your application.\nWebpack will take care of inlining the assets if necessary. A possible way of\ndoing this is:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("code",{parentName:"pre",className:"language-jsx"},"import imgData from '../assets/img/the-image.png';\n// ...\n<img src={imgData} alt=\"...\" />;\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"Another way to add media is by putting it in the per-widget ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"public")," directory.\nLets say you store an image under ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"./src/apps/your-widget/public/foo/bar/my-image.png"),".\nYou can then reference this in your code using:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("code",{parentName:"pre"},'<img src={`${process.env.PUBLIC_ASSETS_URL}/your-widget/foo/bar/my-image.png`} alt="..." />\n')),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"GitHub Actions will ensure that the image is uploaded to a public location,\nwhile Webpack will be in charge of replacing the string\n",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"'process.env.PUBLIC_ASSETS_URL'")," with the actual URL when compiling the code\n(also in GitHub Actions). In coordination to that the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},".env.local")," file in your\nlocal environment should contain ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"PUBLIC_ASSETS_URL=/static"),", so the media also\nworks in Storybook."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("strong",{parentName:"p"},"Importing images directly into the component is encouraged"),", but the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"public"),"\nfolder can be used when there are an abundance of images."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"See ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("a",{parentName:"p",href:"https://create-react-app.dev/docs/using-the-public-folder/",target:"_blank",rel:"nofollow noopener noreferrer"},"Using the Public\nFolder")," from the\n",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"create-react-app")," documentation for more suggestions on when to use the\n",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"public")," folder."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h1",{id:"shared-code-and-features"},"Shared code and features"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"One of the main benefits of aggregating all the widgets under the same\nrepository is sharing code. The following section lists some potential shared\ncode structures."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h2",{id:"1-story-management"},"1. Story management"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"All widgets ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("strong",{parentName:"p"},"must")," include stories. In order to simplify the creation process\nof a story we have developed the following decorators:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("ul",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ul"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"li"},"storyWithTranslation()"),": this helper will ease the process of adding i18n\nsupport for your stories."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ul"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"li"},"storyWithClassNameWrapper()"),": this helper will ease the process of providing\nyour sub-components with your app's unique identifier class when rendered in\nisolation. (see ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("a",{parentName:"li",href:"#6-styling-a-widget"},"Styling a Widget"),")")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h2",{id:"2-static-assets"},"2. Static assets"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"This codebase generates several applications:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("ul",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ul"},"Storybook in the developer's local."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ul"},"Storybook in the Tugboat preview."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ul"},"Storybook as served from GitHub Pages."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ul"},"The widget code in the Tugboat preview."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("li",{parentName:"ul"},"The widget for the production/sandbox registry.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"With this disparity of hosting infrastructure we need an abstraction for how to\nreference static assets for the widgets that all these applications can use.\nExamples of static assets include binary images, fonts, PDF files, etc. Use\nstatic assets for situations where you don't want to bundle these binaries with\nthe JS bundle."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"In order to ensure that all the applications can access the assets the developer\nwill use an evironment variable ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"$PUBLIC_ASSETS_URL"),". Each application has been\nconfigured to translate that into the appropriate URL. See section\n",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"2. Using media")," above for more details."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"You can find this configuration in ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"./storybook/main.js")," in the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"staticDirs"),"\nsection. And in the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"./scripts/ci/upload-public-dirs-to-cos.sh"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"The following code will work in all the applications described above:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("code",{parentName:"pre",className:"language-tsx"},"<a\n  href={`${process.env.PUBLIC_ASSETS_URL}/emoji-cards/documents/history.pdf`}\n/>\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"For images you can use the helper component ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"PublicImage"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("code",{parentName:"pre",className:"language-tsx"},'<PublicImage\n  imgPath="images/hello.png"\n  widgetId="emoji-cards"\n  className="screen"\n  alt={`An image showing a smiley face.`}\n/>\n')),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"Note that in this example ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"hello.png")," will be stored under ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"./src/apps/emoji-cards/public/images/hello.png"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h2",{id:"3-shared-typescript-types"},"3. Shared Typescript types"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"Use of ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("strong",{parentName:"p"},"TypeScript is required")," for contributing to the Widget Registry. For the most part, contributors will need to write their own types as the apps are independent of one another."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"Widgets share some common features, therefore they share some helper code and TypeScript types. This covers things like language codes, color palettes, widget render function types, etc."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"You can find these types in the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"./types")," folder. Make sure to scan its contents before writing your types. We want to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("strong",{parentName:"p"},"standarize types across widgets")," whenever possible."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h2",{id:"4-shared-functionality"},"4. Shared Functionality"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"There are some tasks that are common across all widgets, this is despite the fact that widgets are independent of one another. These include tasks like downloading translation files, massaging the widget input variables, dealing with common state management (like view port resize, changing the widget color scheme, etc.)."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"If a piece of code is shared among two or more widgets, it should be moved up to the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"./common")," folder. Your widget ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("strong",{parentName:"p"},"should not")," import code from another widget's code base."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h2",{id:"5-compile-widgets-locally"},"5. Compile Widgets Locally"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"Once your widget shows properly in Storybook you need to ensure that it will compile properly. If a widget does not compile properly it will not function in the CSM."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("code",{parentName:"pre",className:"language-console"},'# Set ups environment variables, like in the CI environment. Do this once per session.\nexport PUBLIC_URL="https://js-widgets.github.io/registry-starterkit-react/widget-registry/sandbox/"\nexport PUBLIC_ASSETS_URL="https://js-widgets.github.io/registry-starterkit-react/widget-registry/sandbox/static"\n\n# Re-set the output directory between runs. Do this every compilation\nrm --recursive --force widget-registry\nmkdir widget-registry\n# Run the compiler over the local code-base.\nDEBUG=*,-babel*,-eslint* NODE_ENV=production \\\n  npx @js-widgets/webpack-cli \\\n  --existing-registry="${PUBLIC_URL}/registry.json" \\\n  --output-dir="$(pwd)/widget-registry" \\\n  "$(pwd)" --debug\n')),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h2",{id:"6-styling-a-widget"},"6. Styling a Widget"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"We follow the established method for creating and importing SASS stylesheets as found in the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("a",{parentName:"p",href:"https://create-react-app.dev/docs/adding-a-stylesheet",target:"_blank",rel:"nofollow noopener noreferrer"},"documentation for create-react-app"),". ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("strong",{parentName:"p"},"With one caveat: you must namespace all styles")," in order to prevent style overrides on whatever page the widget will eventually be embedded."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h3",{id:"srcappsemoji-selectorcomponentsemojiselectorscss"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"h3"},"src/apps/emoji-selector/components/EmojiSelector.scss")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("code",{parentName:"pre",className:"language-css"},".emoji-selector-widget {\n  &__wrapper {\n    max-width: 1584px;\n    margin: 0 auto;\n  }\n\n  &__message {\n    height: 100px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n}\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h3",{id:"srcappsemoji-selectorcomponentsemojiselectortsx"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"h3"},"src/apps/emoji-selector/components/EmojiSelector.tsx")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("code",{parentName:"pre",className:"language-tsx"},'...\nimport \'./EmojiSelector.scss\';\n\nconst EmojiSelector = () => {\n  ...\n  <div className="emoji-selector-widget"> // very important namespace\n    <div className="emoji-selector-widget__wrapper">...</div>\n    <div className="emoji-selector-widget__message">...</div>\n  </div>\n  ...\n}\n')),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"When writing stories for your widget and rendering sub-components in isolation,\nyou'll need to provide your unique class wrapper to that sub-component in order\nfor your styles to apply correctly. To make this easier, use the\n",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"storyWithClassNameWrapper")," decorator found in the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"p"},"common")," directory, providing\nit your app's unique identifier class."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h3",{id:"srcappsemoji-selectorcomponentsemojiselectorstoriestsx"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("inlineCode",{parentName:"h3"},"src/apps/emoji-selector/components/EmojiSelector.stories.tsx")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("code",{parentName:"pre",className:"language-tsx"},"import storyWithClassNameWrapper from '../../../common/storyWithClassNameWrapper';\n\nconst stories: Meta = {\n  ...\n  decorators: [\n    ...\n    storyWithClassNameWrapper('emoji-selector-widget'),\n  ],\n};\n")))}MDXContent.isMDXComponent=!0;const __page=()=>{throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};const componentMeta={title:"Documentation/Contributing/Tips",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={...componentMeta.parameters.docs||{},page:()=>(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__.aT,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)(MDXContent,null))},__webpack_exports__.default=componentMeta;const __namedExportsOrder=["__page"]},"./.storybook/docs/4-quality-assurance.stories.mdx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:function(){return __namedExportsOrder},__page:function(){return __page},default:function(){return _4_quality_assurance_stories}});__webpack_require__("./node_modules/react/index.js");var esm=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),dist_esm=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),a11y_tests_namespaceObject=__webpack_require__.p+"c24d142bb7262e29b512.png";function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const layoutProps={};function MDXContent({components:components,...props}){return(0,esm.kt)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),(0,esm.kt)(dist_esm.h_,{title:"Documentation/QA",mdxType:"Meta"}),(0,esm.kt)("h1",{id:"quality-assurance"},"Quality Assurance"),(0,esm.kt)("p",null,"The widget registry attempts to automate some of the most tedious tasks for quality assurance."),(0,esm.kt)("h2",{id:"automated-tests"},"Automated tests"),(0,esm.kt)("h3",{id:"explicit-tests"},"Explicit tests"),(0,esm.kt)("p",null,"These are Jest tests that leverage ",(0,esm.kt)("inlineCode",{parentName:"p"},"@testing-library/react"),". See the documentation on Jest and ",(0,esm.kt)("inlineCode",{parentName:"p"},"@testing-library/react"),", and check a test example in ",(0,esm.kt)("inlineCode",{parentName:"p"},"./src/apps/emoji-selector/EmojiSelector.test.tsx"),"."),(0,esm.kt)("h3",{id:"storyshots"},"Storyshots"),(0,esm.kt)("p",null,"Stories are renderings of React components with certain data and conditions. Storyshots will store the rendered markup in a file when the developer instructs it to do it. This is done by executing ",(0,esm.kt)("inlineCode",{parentName:"p"},"yarn test -u")," after making sure that Storybook behaves correctly in their local."),(0,esm.kt)("p",null,"Moving forward, each time ",(0,esm.kt)("inlineCode",{parentName:"p"},"yarn test")," is executed, Jest will check if the currently rendered markup matches the markup previously stored exactly."),(0,esm.kt)("p",null,(0,esm.kt)("inlineCode",{parentName:"p"},"yarn test")," is executed optionally before pushing code to the PR branch in the developer's local. Tests are also executed in Travis as part of the PR checks."),(0,esm.kt)("p",null,"These tests aim to reduce accidental changes to other widgets, especially when dealing with changes in code shared across multiple widgets. This will also provide additional safety for refactors, where the code must change but not the end result."),(0,esm.kt)("h3",{id:"accessibility-reports"},"Accessibility reports"),(0,esm.kt)("p",null,"Each component in Storybook contains a tab, in the lower section, with a report listing accessibility issues. The QA team is in charge of spotting them, and communicating with the developer in order to address or dismiss the alarms."),(0,esm.kt)("img",{src:a11y_tests_namespaceObject,alt:"Accessibility tests"}),(0,esm.kt)("h2",{id:"automated-visual-regression"},"Automated visual regression"),(0,esm.kt)("p",null,"Storybook generates a route for each story. In this route Storybook will render the component without any other UI."),(0,esm.kt)("p",null,"Tugboat will use these routes to compare components in a PR with the components in the base preview. This will be used to highlight all the changes in all the components caused by a given PR."),(0,esm.kt)("p",null,"Note that not all differences are regressions. Intended changes will also show up in the report. It is left up to the human to validate the differences and ignore false alarms."),(0,esm.kt)("p",null,"The developer is responsible to opt-in to visual regression by providing the URLs to the necessary components in ",(0,esm.kt)("inlineCode",{parentName:"p"},"./.tugboat/config.yml"),". Only the URLs listed there will be used in visual regression testing. Example:"),(0,esm.kt)("pre",null,(0,esm.kt)("code",{parentName:"pre",className:"language-yaml"},"urls:\n  emoji-selector:\n    - /iframe.html?id=emoji-selector--default&args=&viewMode=story\n    - /iframe.html?id=emoji-selector--gray&args=&viewMode=story\n")),(0,esm.kt)("h2",{id:"manual-testing"},"Manual testing"),(0,esm.kt)("h3",{id:"testing-the-stories-for-a-pr"},"Testing the stories for a PR"),(0,esm.kt)("p",null,"Whenever a new PR is created for the widget registry, we create a Tugboat\npreview. This preview contains the Storybook application with the changes\nproposed by that PR. The QA team can use that to ensure that changes to an\nexisting widget, or a brand new one, look and behave as expected."),(0,esm.kt)("p",null,"The basic expectation for a widget in Storybook is to have a documentation page\nwhere it explains how the widget should look and how it should behave. It is\nexpected that this documentation is up-to-date with the latest changes and\nimprovements."),(0,esm.kt)("h3",{id:"testing-the-widget-in-drupal"},"Testing the widget in Drupal"),(0,esm.kt)("p",null,"Tugboat will create a barebones Drupal site, along with the Tugboat preview for\nStorybook. This site will contain Drupal core along with the integration modules\nfor the widget registry. This site will be configured with a preview registry\nfor that PR."),(0,esm.kt)("p",null,"This tool is specially designed to ensure that the widget being proposed in the\nPR can be selected and rendered in Drupal."),(0,esm.kt)("p",null,"QA is expected to create a ",(0,esm.kt)("em",{parentName:"p"},"Widget Instance")," for the widget in that ticket and\nperform a smoke test in Drupal. QA engineers should place special emphasis to\nthe editorial tools to input the widget."))}MDXContent.isMDXComponent=!0;const __page=()=>{throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};const componentMeta={title:"Documentation/QA",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={...componentMeta.parameters.docs||{},page:()=>(0,esm.kt)(dist_esm.aT,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,esm.kt)(MDXContent,null))};var _4_quality_assurance_stories=componentMeta;const __namedExportsOrder=["__page"]},"./.storybook/docs/5-configure-deployment.stories.mdx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:function(){return __namedExportsOrder},__page:function(){return __page},default:function(){return _5_configure_deployment_stories}});__webpack_require__("./node_modules/react/index.js");var esm=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),dist_esm=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),fork_repository_namespaceObject=__webpack_require__.p+"73270baa07bba93474ae.png",copy_all_branches_namespaceObject=__webpack_require__.p+"4c11f77d872b37aa800d.png",gh_pages_configuration_namespaceObject=__webpack_require__.p+"b305717c9240ff9ca36f.png";function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const layoutProps={};function MDXContent({components:components,...props}){return(0,esm.kt)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),(0,esm.kt)(dist_esm.h_,{title:"Documentation/Configure Deployment",mdxType:"Meta"}),(0,esm.kt)("h1",{id:"configure-deployment"},"Configure Deployment"),(0,esm.kt)("p",null,"GitHub makes this process really easy."),(0,esm.kt)("ol",null,(0,esm.kt)("li",{parentName:"ol"},'Fork the repository by clicking "Use this template".')),(0,esm.kt)("img",{src:fork_repository_namespaceObject,alt:"Fork the repository"}),(0,esm.kt)("ol",{start:2},(0,esm.kt)("li",{parentName:"ol"},"Ensure you fork the repository with all the same branches. This is everything\nyou need to do.")),(0,esm.kt)("img",{src:copy_all_branches_namespaceObject,alt:"Copy all branches"}),(0,esm.kt)("ol",{start:3},(0,esm.kt)("li",{parentName:"ol"},"Check that the new repository has the correct configuration in GitHub Pages.")),(0,esm.kt)("img",{src:gh_pages_configuration_namespaceObject,alt:"Check GH Pages configuration"}),(0,esm.kt)("ol",{start:4},(0,esm.kt)("li",{parentName:"ol"},(0,esm.kt)("p",{parentName:"li"},"Wait for GitHub Actions to deploy after the commit from the initial fork.")),(0,esm.kt)("li",{parentName:"ol"},(0,esm.kt)("p",{parentName:"li"},"Navigate to your new registry. Grab the URL from the settings page shown in\nthe screenshot above (will only appear after the first deploy)."))),(0,esm.kt)("ul",null,(0,esm.kt)("li",{parentName:"ul"},"Storybook (production): ",(0,esm.kt)("inlineCode",{parentName:"li"},"<GH Pages URL>/main/storybook"),"."),(0,esm.kt)("li",{parentName:"ul"},"Storybook (development): ",(0,esm.kt)("inlineCode",{parentName:"li"},"<GH Pages URL>/development/storybook"),"."),(0,esm.kt)("li",{parentName:"ul"},"Registry (production): ",(0,esm.kt)("inlineCode",{parentName:"li"},"<GH Pages URL>/main/widget-registry/registry.json"),"."),(0,esm.kt)("li",{parentName:"ul"},"Registry (development): ",(0,esm.kt)("inlineCode",{parentName:"li"},"<GH Pages URL>/development/widget-registry/registry.json"),".")))}MDXContent.isMDXComponent=!0;const __page=()=>{throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};const componentMeta={title:"Documentation/Configure Deployment",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={...componentMeta.parameters.docs||{},page:()=>(0,esm.kt)(dist_esm.aT,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,esm.kt)(MDXContent,null))};var _5_configure_deployment_stories=componentMeta;const __namedExportsOrder=["__page"]},"./.storybook/docs/6-configure-tugboat.stories.mdx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:function(){return __namedExportsOrder},__page:function(){return __page},default:function(){return _6_configure_tugboat_stories}});__webpack_require__("./node_modules/react/index.js");var esm=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),dist_esm=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),register_tugboat_namespaceObject=__webpack_require__.p+"9a886ca396c2deee680a.png",create_previews_namespaceObject=__webpack_require__.p+"63b336b6ea672cf9dc19.png",development_settings_namespaceObject=__webpack_require__.p+"ff74ee09b4aa7c1e969c.png",main_settings_namespaceObject=__webpack_require__.p+"eb854c5e088d5adef64a.png";function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const layoutProps={};function MDXContent({components:components,...props}){return(0,esm.kt)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),(0,esm.kt)(dist_esm.h_,{title:"Documentation/Configure Tugboat",mdxType:"Meta"}),(0,esm.kt)("h1",{id:"configure-tugboat"},"Configure Tugboat"),(0,esm.kt)("p",null,"Tugboat is a preview environment generator supported in this project. If you\ndon't want or need Tugboat integration, please delete the ",(0,esm.kt)("inlineCode",{parentName:"p"},".tugboat")," directory\nin the codebase and forget about it."),(0,esm.kt)("h2",{id:"supported-features"},"Supported features"),(0,esm.kt)("p",null,"This project comes with Tugboat preconfigured to generate the following\nenvironments on each pull request:"),(0,esm.kt)("ul",null,(0,esm.kt)("li",{parentName:"ul"},"The ",(0,esm.kt)("strong",{parentName:"li"},"Storybook")," widget catalog to preview the changes being proposed."),(0,esm.kt)("li",{parentName:"ul"},"A ",(0,esm.kt)("strong",{parentName:"li"},"vanilla Drupal")," site pre-configured with a page to show how the widget\nproposed in the PR will work in a Drupal environment.")),(0,esm.kt)("h2",{id:"register-the-repository-in-tugboat"},"Register the repository in Tugboat"),(0,esm.kt)("p",null,"Once you have registered and decided which plan to use (you can start with the\nfree plan and upgrade later if you feel the need of it), you will need to\nconnect your repository with Tugboat."),(0,esm.kt)("p",null,"Read ",(0,esm.kt)("a",{parentName:"p",href:"https://docs.tugboatqa.com/setting-up-tugboat/",target:"_blank",rel:"nofollow noopener noreferrer"},"the Tugboat documentation"),"\nto do so, but here is a TL;DR."),(0,esm.kt)("img",{src:register_tugboat_namespaceObject,alt:"Create new project"}),(0,esm.kt)("p",null,"After connecting your repo with Tugboat, you'll see the branches in your repo.\nWe'll treat ",(0,esm.kt)("inlineCode",{parentName:"p"},"development")," as the default base branch. PRs will likely be made\nagainst this branch to introduce new features or bug fixes."),(0,esm.kt)("p",null,"In order to leverage base previews in Tugboat (highly recommended) we'll need to\ncreate our base previews for the ",(0,esm.kt)("inlineCode",{parentName:"p"},"development")," and ",(0,esm.kt)("inlineCode",{parentName:"p"},"main")," branches."),(0,esm.kt)("img",{src:create_previews_namespaceObject,alt:"Create previews"}),(0,esm.kt)("p",null,"The preview generated from ",(0,esm.kt)("inlineCode",{parentName:"p"},"development")," will be our base preview for the\nproject."),(0,esm.kt)("img",{src:development_settings_namespaceObject,alt:"Development settings"}),(0,esm.kt)("p",null,"The ",(0,esm.kt)("inlineCode",{parentName:"p"},"main")," branch will be our baseline of what is in production, so any PR\ncreated against ",(0,esm.kt)("inlineCode",{parentName:"p"},"main")," will use this preview as a base. Learn more about preview\nenvironments and base previews in the official documentation."),(0,esm.kt)("img",{src:main_settings_namespaceObject,alt:"Main settings"}),(0,esm.kt)("p",null,"Once this is configured, when a developer creates a new Pull Request, a new\nenvironment will be created for that PR in Tugboat."))}MDXContent.isMDXComponent=!0;const __page=()=>{throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};const componentMeta={title:"Documentation/Configure Tugboat",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={...componentMeta.parameters.docs||{},page:()=>(0,esm.kt)(dist_esm.aT,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,esm.kt)(MDXContent,null))};var _6_configure_tugboat_stories=componentMeta;const __namedExportsOrder=["__page"]},"./src/apps/banner/widget.stories.mdx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:function(){return __namedExportsOrder},__page:function(){return __page}});__webpack_require__("./node_modules/react/index.js");var _mdx_js_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@mdx-js/react/dist/esm.js"),_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/addon-docs/dist/esm/index.js"),_components_BannerCards__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/apps/banner/components/BannerCards.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const layoutProps={};function MDXContent({components:components,...props}){return(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__.h_,{title:"Widgets/Banner Cards/Widget",mdxType:"Meta"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"Banners"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h2",{id:"requirements"},"Requirements"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("p",null,"This widget will allow editors to pick one emoji to create a beautiful card. End\nusers, in turn, will be able to share excitement in social media about which\nemoji represents every moment of their lives."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__.oG,{id:"widgets-banner-cards-components--banner",mdxType:"Story"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)("h2",{id:"props"},"Props"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__.$4,{of:_components_BannerCards__WEBPACK_IMPORTED_MODULE_3__.Z,mdxType:"ArgsTable"}))}MDXContent.isMDXComponent=!0;const __page=()=>{throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};const componentMeta={title:"Widgets/Banner Cards/Widget",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={...componentMeta.parameters.docs||{},page:()=>(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)(_storybook_addon_docs__WEBPACK_IMPORTED_MODULE_2__.aT,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentAnnotations:componentMeta},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__.kt)(MDXContent,null))},__webpack_exports__.default=componentMeta;const __namedExportsOrder=["__page"]},"./src/apps/banner/components/BannerCards.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Banner:function(){return Banner},__namedExportsOrder:function(){return __namedExportsOrder}});var _Users_273481_Desktop_project_chakara_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_BannerCards__WEBPACK_IMPORTED_MODULE_1__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./src/apps/banner/components/BannerCards.tsx")),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js"),stories={title:"Widgets/Banner Cards/Components",component:_BannerCards__WEBPACK_IMPORTED_MODULE_1__.Z,argTypes:{backgroundColor:{control:"color",description:"Please choose the Backgroud color.",table:{defaultValue:{summary:"5a7c55"}}},imgPath:{control:"select",options:["No Image","hello.jpg","articles_bg.jpg"],description:"Please Choose the Background Image.",table:{defaultValue:{summary:"No Image"}}},textColor:{control:"color",description:"Please choose the Text color.",table:{defaultValue:{summary:"fff"}}},title:{description:"Please Update the Descriptions Text. ",table:{defaultValue:{summary:"Descriptions"}}},heading:{description:"Please Update the Heading Text.",table:{defaultValue:{summary:"Heading"}}}},args:{backgroundColor:"#5a7c55",textColor:"#fff",imgPath:"articles_bg.jpg"}},Banner=function Template(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_BannerCards__WEBPACK_IMPORTED_MODULE_1__.Z,(0,_Users_273481_Desktop_project_chakara_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},args))}.bind({});Banner.args={title:"Banner descritions",heading:"Banner Heading"},__webpack_exports__.default=stories,Banner.parameters=(0,_Users_273481_Desktop_project_chakara_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({storySource:{source:"(args) => <BannerCards {...args} />"}},Banner.parameters);var __namedExportsOrder=["Banner"]},"./src/common/components/PublicImage.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},NoImagePath:function(){return NoImagePath},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return PublicImage_stories}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),jsx_runtime=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js")),process=__webpack_require__("./node_modules/process/browser.js"),_excluded=["imgPath","widgetId"];function grabEnvVar(name){return process.env[name]}var PublicImage=function PublicImage(_ref){var imgPath=_ref.imgPath,widgetId=_ref.widgetId,props=(0,objectWithoutProperties.Z)(_ref,_excluded);return(0,jsx_runtime.jsx)("img",(0,objectSpread2.Z)({src:imgPath&&widgetId?"".concat("/static","/").concat(widgetId,"/").concat(imgPath):void 0},props))},components_PublicImage=PublicImage;try{grabEnvVar.displayName="grabEnvVar",grabEnvVar.__docgenInfo={description:"",displayName:"grabEnvVar",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/common/components/PublicImage.tsx#grabEnvVar"]={docgenInfo:grabEnvVar.__docgenInfo,name:"grabEnvVar",path:"src/common/components/PublicImage.tsx#grabEnvVar"})}catch(__react_docgen_typescript_loader_error){}try{PublicImage.displayName="PublicImage",PublicImage.__docgenInfo={description:"",displayName:"PublicImage",props:{imgPath:{defaultValue:null,description:"",name:"imgPath",required:!0,type:{name:"string"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/common/components/PublicImage.tsx#PublicImage"]={docgenInfo:PublicImage.__docgenInfo,name:"PublicImage",path:"src/common/components/PublicImage.tsx#PublicImage"})}catch(__react_docgen_typescript_loader_error){}var stories={component:components_PublicImage,title:"Common/Public Image"},Template=function Template(args){return(0,jsx_runtime.jsx)(components_PublicImage,(0,objectSpread2.Z)({},args))},Default=Template.bind({});Default.args={imgPath:"images/hello.jpg",widgetId:"emoji-cards",className:"screen",alt:"Some alternative text"};var NoImagePath=Template.bind({});NoImagePath.args={imgPath:"",widgetId:"emoji-cards",alt:"Image is expected to be broken"};var PublicImage_stories=stories;Default.parameters=(0,objectSpread2.Z)({storySource:{source:"(args) => <PublicImage {...args} />"}},Default.parameters),NoImagePath.parameters=(0,objectSpread2.Z)({storySource:{source:"(args) => <PublicImage {...args} />"}},NoImagePath.parameters);var __namedExportsOrder=["Default","NoImagePath"]},"./.storybook/preview.js-generated-config-entry.js":function(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){"use strict";var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,{__namedExportsOrder:function(){return __namedExportsOrder},decorators:function(){return decorators},parameters:function(){return parameters}});var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),parameters={actions:{argTypesRegex:"^on[A-Z].*"},showRoots:!0,controls:{expanded:!0,matchers:{color:/(background|color)$/i,date:/Date$/}},locale:"en",locales:{ar:{title:"Arabic"},de:{title:"German"},en:{title:"English"},es:{title:"Spanish"},fr:{title:"French"},it:{title:"Italian"},ja:{title:"Japanese"},ko:{title:"Korean"},pl:{title:"Polish"},pt:{title:"Portuguese"},ru:{title:"Russian"},tr:{title:"Turkish"},zh:{title:"Chinese"}},layout:"fullscreen"},decorators=[function(story){return(0,jsx_runtime.jsx)("div",{role:"main",style:{display:"flex",flexDirection:"column",alignItems:"center",margin:"5px"},children:(0,jsx_runtime.jsx)("div",{style:{position:"relative",width:"100%",zIndex:0},children:story()})})}],__namedExportsOrder=["parameters","decorators"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":return(0,ClientApi.uc)(value);case"argTypes":return(0,ClientApi.v9)(value);case"decorators":return value.forEach((function(decorator){return(0,ClientApi.$9)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return(0,ClientApi.HZ)(loader,!1)}));case"parameters":return(0,ClientApi.h1)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return(0,ClientApi.My)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return(0,ClientApi._C)(enhancer)}));case"render":return(0,ClientApi.$P)(value);case"globals":case"globalTypes":var v={};return v[key]=value,(0,ClientApi.h1)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./src/apps/banner/components/BannerCards.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _Users_273481_Desktop_project_chakara_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js")),styles={card:{background:"white",borderRadius:"0.5rem",boxShadow:"0.125rem 0.125rem 0.5rem rgba(0, 0, 0, 0.1)",fontFamily:"helvetica, sans-serif",overflow:"hidden",maxWidth:"63rem",height:"26rem",position:"relative",backgroundSize:"100%",backgroundRepeat:"no-repeat",wordWrap:"break-word"},cardContainer:{background:"rgba(0, 0, 0, 0.1)",fontSize:"8rem",justifyContent:"center",lineHeight:"100%",overflow:"hidden",position:"absolute",padding:"1rem",width:"100%",height:"100%"},cardInfo:{background:"rgba(0, 0, 0, 0.01)",color:"rgba(0, 0, 0, 0.6)",padding:"1rem"},cardName:{fontWeight:"bold",fontSize:"2rem"},cardDescription:{fontSize:"1.25rem",padding:"1rem 0"},cardCategory:{color:"rgba(0, 0, 0, 0.4)",fontSize:"0.85rem",textTransform:"uppercase",textAlign:"right"}},BannerCards=function BannerCards(_ref){var heading=_ref.heading,title=_ref.title,textColor=_ref.textColor,backgroundColor=_ref.backgroundColor,imgPath=_ref.imgPath;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{style:(0,_Users_273481_Desktop_project_chakara_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)((0,_Users_273481_Desktop_project_chakara_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},styles.card),{},{backgroundImage:"url(/samples/".concat("/static","/banner/images/").concat(imgPath,")"),backgroundColor:backgroundColor}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{style:styles.cardInfo,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("h1",{style:(0,_Users_273481_Desktop_project_chakara_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)((0,_Users_273481_Desktop_project_chakara_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},styles.cardName),{},{color:textColor}),children:heading}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("p",{style:(0,_Users_273481_Desktop_project_chakara_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)((0,_Users_273481_Desktop_project_chakara_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({},styles.cardDescription),{},{color:textColor}),children:title})]})})};__webpack_exports__.Z=BannerCards;try{BannerCards.displayName="BannerCards",BannerCards.__docgenInfo={description:"",displayName:"BannerCards",props:{heading:{defaultValue:null,description:"",name:"heading",required:!0,type:{name:"string"}},backgroundColor:{defaultValue:null,description:"",name:"backgroundColor",required:!0,type:{name:"string"}},imgPath:{defaultValue:null,description:"",name:"imgPath",required:!0,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},textColor:{defaultValue:null,description:"",name:"textColor",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/banner/components/BannerCards.tsx#BannerCards"]={docgenInfo:BannerCards.__docgenInfo,name:"BannerCards",path:"src/apps/banner/components/BannerCards.tsx#BannerCards"})}catch(__react_docgen_typescript_loader_error){}},"./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx%7Cmdx))$":function(module,__unused_webpack_exports,__webpack_require__){var map={"./apps/banner/components/BannerCards.stories.tsx":"./src/apps/banner/components/BannerCards.stories.tsx","./apps/banner/widget.stories.mdx":"./src/apps/banner/widget.stories.mdx","./common/components/PublicImage.stories.tsx":"./src/common/components/PublicImage.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx%7Cmdx))$"},"./storybook-init-framework-entry.js":function(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){"use strict";__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},"?4f7e":function(){},"./generated-stories-entry.cjs":function(module,__unused_webpack_exports,__webpack_require__){"use strict";module=__webpack_require__.nmd(module),(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./.storybook/docs sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx%7Cmdx))$"),__webpack_require__("./src sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx%7Cmdx))$")],module,!1)}},function(__webpack_require__){var __webpack_exec__=function(moduleId){return __webpack_require__(__webpack_require__.s=moduleId)};__webpack_require__.O(0,[796],(function(){return __webpack_exec__("./node_modules/@storybook/core-server/node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_exec__("./node_modules/@storybook/core-server/node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_exec__("./storybook-init-framework-entry.js"),__webpack_exec__("./node_modules/@storybook/react/dist/esm/client/docs/config-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-links/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-docs/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-actions/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-backgrounds/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-measure/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-outline/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/storybook-i18n/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/@storybook/addon-a11y/preview.js-generated-config-entry.js"),__webpack_exec__("./node_modules/storybook-i18n/dist/esm/preset/preview.js-generated-config-entry.js"),__webpack_exec__("./.storybook/preview.js-generated-config-entry.js"),__webpack_exec__("./generated-stories-entry.cjs")}));__webpack_require__.O()}]);